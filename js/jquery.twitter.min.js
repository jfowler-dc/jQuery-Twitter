/*! Twitter 1.0 | Copyright (c) 2012 Leonardo Santos | Dual licensed under the MIT and GPL licenses */
(function(e,m){var o=function(c){var b=c.text;e.each(c.entities.urls,function(c,e){b=b.replace(e.url,e.display_url.linkfy(e.expanded_url))});return b.replace(/\B[@#]\w+/g,function(b){return b.linkfy("//twitter.com/"+(b[a="search"]("#")?"":a+"?q=%23")+b.substring(1))})};String.prototype.linkfy=function(c){return'<a href="%0" target="_blank">%1</a>'.format(c,this)};String.prototype.format=function(){for(var c=this,b=arguments.length;b--;)c=c.replace(RegExp("%"+b,"g"),arguments[b]);return c};e.extend({twitter:function(c,b,j,n){var f=e.extend({timeSpan:!0,exclude_replies:!0,time_format:"%1 %0, %2 at %3",less_than_a_min:"less than a minute ago",timespan_format:"%0 %1 ago",i18n_time:["minute","hour","day"],i18n_months:"January,February,March,April,May,June,July,August,September,October,November,December".split(",")},n);c===m||b===m||(e.isFunction(b)&&(j=b,b=1),e.getJSON("//api.%01/statuses/user_timeline.json?count=%1&include_entities=1&exclude_replies=%2&screen_name=%3&callback=?".format("twitter.com/",b,f.exclude_replies,c),function(b){var c=profile={};e.each(b,function(e,j){var g=new Date(b[e].created_at.replace(/\+0+/,"UTC")),i=new Date,k=i.getTimezoneOffset()*6E4,i=Math.round((+i-+g+k)/6E4),k=g.getMinutes();if(f.timeSpan)if(i<60)g=i===0&&f.less_than_a_min?f.less_than_a_min:f.timespan_format.format(i,f.i18n_time[0]+(i!=1?"s":""));else if(i<1440){h=Math.floor(i/60);g=f.timespan_format.format(h,f.i18n_time[1]+(h>1?"s":""))}else{d=Math.floor(i/1440);g=f.timespan_format.format(d,f.i18n_time[2]+(d>1?"s":""))}else g=f.time_format.format(g.getDate(),f.i18n_months[g.getMonth()],g.getFullYear(),g.getHours()+"h"+(k?(k<10?"0":"")+k:""));c[e]={text:o(j),time:g};c.length=e});var l=b[0].user;c.profile={screen_name:l.screen_name,followers:l.followers_count,avatar:l.profile_image_url};e.isFunction(j)&&j.call(this,c)}))}})})(jQuery);